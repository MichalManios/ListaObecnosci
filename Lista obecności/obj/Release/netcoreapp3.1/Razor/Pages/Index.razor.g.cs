#pragma checksum "C:\To Publish\Gotowe\Lista obecności\Lista obecności\Pages\Index.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "cec65b6475c8ad8c0eca6b14143c29d2278fd658"
// <auto-generated/>
#pragma warning disable 1591
namespace Lista_obecności.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "C:\To Publish\Gotowe\Lista obecności\Lista obecności\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\To Publish\Gotowe\Lista obecności\Lista obecności\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\To Publish\Gotowe\Lista obecności\Lista obecności\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\To Publish\Gotowe\Lista obecności\Lista obecności\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\To Publish\Gotowe\Lista obecności\Lista obecności\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\To Publish\Gotowe\Lista obecności\Lista obecności\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\To Publish\Gotowe\Lista obecności\Lista obecności\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\To Publish\Gotowe\Lista obecności\Lista obecności\_Imports.razor"
using Lista_obecności;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\To Publish\Gotowe\Lista obecności\Lista obecności\_Imports.razor"
using Lista_obecności.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\To Publish\Gotowe\Lista obecności\Lista obecności\Pages\Index.razor"
using System.Threading.Tasks;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\To Publish\Gotowe\Lista obecności\Lista obecności\Pages\Index.razor"
using Microsoft.AspNetCore.Identity;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\To Publish\Gotowe\Lista obecności\Lista obecności\Pages\Index.razor"
using Lista_obecności.Data;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\To Publish\Gotowe\Lista obecności\Lista obecności\Pages\Index.razor"
using Lista_obecności.DTO;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.LayoutAttribute(typeof(Indexlayout))]
    [Microsoft.AspNetCore.Components.RouteAttribute("/")]
    public partial class Index : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.OpenElement(0, "body");
            __builder.AddAttribute(1, "onload", "DiplayClock(); setInterval(\'DiplayClock()\', 1000);");
            __builder.AddMarkupContent(2, "\r\n\r\n        ");
            __builder.OpenElement(3, "div");
            __builder.AddAttribute(4, "class", "container col-12");
            __builder.AddMarkupContent(5, "\r\n\r\n            ");
            __builder.AddMarkupContent(6, @"<header>
                <h1 style=""
                        color: #007bff;
                        text-align: center;
                        font-family: Cambria;
                        text-shadow: 3px 3px 1px black;
                        letter-spacing: 3px;
                        "">
                    Lista obecności
                </h1>
            </header>

            ");
            __builder.AddMarkupContent(7, "<div class=\"col-12\"><br></div>\r\n            ");
            __builder.AddMarkupContent(8, "<div class=\"col-12\"><br></div>\r\n            ");
            __builder.AddMarkupContent(9, "<div class=\"col-12\"><br></div>\r\n            ");
            __builder.AddMarkupContent(10, "<div class=\"col-12\"><br></div>\r\n            ");
            __builder.AddMarkupContent(11, "<div class=\"col-12\"><br></div>\r\n\r\n\r\n            ");
            __builder.OpenElement(12, "div");
            __builder.AddAttribute(13, "class", "row form-group col-lg-12");
            __builder.AddMarkupContent(14, "\r\n                ");
            __builder.OpenElement(15, "div");
            __builder.AddAttribute(16, "class", "col-lg-6");
            __builder.AddMarkupContent(17, "\r\n                    ");
            __builder.AddMarkupContent(18, "<div>\r\n                        <img id=\"photo\" src=\"/Images/unnamed.png\" asp-append-version=\"true\" width=\"300\" align=\"right\">\r\n                    </div>\r\n                    <br>\r\n                    <br>\r\n                    <br>\r\n                    ");
            __builder.OpenComponent<Microsoft.AspNetCore.Components.Authorization.AuthorizeView>(19);
            __builder.AddAttribute(20, "NotAuthorized", (Microsoft.AspNetCore.Components.RenderFragment<Microsoft.AspNetCore.Components.Authorization.AuthenticationState>)((context) => (__builder2) => {
                __builder2.AddMarkupContent(21, "\r\n                            ");
                __builder2.AddMarkupContent(22, @"<div class=""form-group col-lg-6 offset-lg-3"">
                                <input onclick=""location.href='/Identity/Account/Login';"" type=""submit"" style=""letter-spacing: 1px; font-family: Cambria;"" class=""form-control col-lg-12 btn btn-outline-primary"" value=""Zaloguj"">
                            </div>

                            ");
                __builder2.AddMarkupContent(23, @"<div class=""col-lg-6 offset-lg-3"">
                                <input onclick=""location.href='/Identity/Account/Register';"" type=""submit"" style=""letter-spacing: 1px; font-family: Cambria;"" class=""form-control col-lg-12 btn btn-outline-primary"" value=""Załóż konto"">
                            </div>
                        ");
            }
            ));
            __builder.AddAttribute(24, "Authorized", (Microsoft.AspNetCore.Components.RenderFragment<Microsoft.AspNetCore.Components.Authorization.AuthenticationState>)((context) => (__builder2) => {
                __builder2.AddMarkupContent(25, "\r\n                            <br>\r\n                            ");
                __builder2.AddMarkupContent(26, @"<div class=""form-group col-lg-6 offset-lg-3"">
                                <form method=""post"" action=""Identity/Account/Logout"">
                                    <input type=""submit"" style=""letter-spacing: 1px; font-family: Cambria;"" class=""form-control col-lg-12 btn btn-outline-primary"" value=""Wyloguj się"">
                                </form>
                            </div>
                        ");
            }
            ));
            __builder.CloseComponent();
            __builder.AddMarkupContent(27, "\r\n                ");
            __builder.CloseElement();
            __builder.AddMarkupContent(28, "\r\n                ");
            __builder.AddMarkupContent(29, "<div class=\"col-lg-1\" id=\"line1\">\r\n                    <div id=\"line\"></div>\r\n                </div>\r\n\r\n\r\n\r\n                ");
            __builder.OpenElement(30, "div");
            __builder.AddAttribute(31, "class", "col-lg-5");
            __builder.AddMarkupContent(32, "\r\n\r\n                    ");
            __builder.AddMarkupContent(33, @"<div class=""month offset-2 col-8"" style=""display:inline-block; border-radius:50px; background:#663166"">
                        <ul>
                            <li id=""printMonth""> <span id=""clock"">&nbsp;</span></li>
                        </ul>
                    </div>

                    ");
            __builder.AddMarkupContent(34, "<div class=\"col-12\"><br></div>\r\n                    ");
            __builder.AddMarkupContent(35, "<div class=\"col-12\"><br></div>\r\n                    ");
            __builder.AddMarkupContent(36, "<div class=\"col-12\"><br></div>\r\n\r\n                    ");
            __builder.OpenElement(37, "div");
            __builder.AddAttribute(38, "class", "col-12 m-0 p-0");
            __builder.AddAttribute(39, "style", "display:inline-block;");
            __builder.AddMarkupContent(40, "\r\n                        ");
            __builder.OpenElement(41, "div");
            __builder.AddAttribute(42, "class", "month");
            __builder.AddAttribute(43, "style", "background:#663166");
            __builder.AddMarkupContent(44, "\r\n                            ");
            __builder.OpenElement(45, "ul");
            __builder.AddMarkupContent(46, "\r\n                                ");
            __builder.OpenElement(47, "li");
            __builder.AddAttribute(48, "id", "printMonth");
            __builder.AddContent(49, 
#nullable restore
#line 88 "C:\To Publish\Gotowe\Lista obecności\Lista obecności\Pages\Index.razor"
                                                     Date

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(50, "\r\n                                ");
            __builder.OpenElement(51, "li");
            __builder.AddAttribute(52, "id", "printYear");
            __builder.AddContent(53, 
#nullable restore
#line 89 "C:\To Publish\Gotowe\Lista obecności\Lista obecności\Pages\Index.razor"
                                                    DateTime.Today.Year

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(54, "\r\n                            ");
            __builder.CloseElement();
            __builder.AddMarkupContent(55, "\r\n                        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(56, "\r\n\r\n                        ");
            __builder.AddMarkupContent(57, @"<ul class=""weekdays"">
                            <li>PON</li>
                            <li>WTO</li>
                            <li>ŚRO</li>
                            <li>CZW</li>
                            <li>PIĄ</li>
                            <li style=""color:red"">SOB</li>
                            <li style=""color:red"">NIE</li>
                        </ul>

                        ");
            __builder.OpenElement(58, "ul");
            __builder.AddAttribute(59, "class", "days");
            __builder.AddAttribute(60, "id", "days");
            __builder.AddMarkupContent(61, "\r\n\r\n");
#nullable restore
#line 105 "C:\To Publish\Gotowe\Lista obecności\Lista obecności\Pages\Index.razor"
                              
                                iStartDating = DrawCalendar();
                                int x = 1;
                                int s = 0;
                                iRedDays.Clear();

                                

#line default
#line hidden
#nullable disable
#nullable restore
#line 111 "C:\To Publish\Gotowe\Lista obecności\Lista obecności\Pages\Index.razor"
                                 for (int i = 1; i < 43; i++)
                                {
                                    s++;
                                    if (iStartDating <= i && x <= iDayInMonth)
                                    {
                                        if (HolidayDay != null)
                                            foreach (var holiday in HolidayDay)
                                            {
                                                if (x == holiday && x == DateTime.Today.Day)
                                                {

#line default
#line hidden
#nullable disable
            __builder.AddContent(62, "                                                    ");
            __builder.OpenElement(63, "li");
            __builder.AddAttribute(64, "style", "color:red;background:lightgray; border-radius:25px;");
            __builder.AddContent(65, 
#nullable restore
#line 121 "C:\To Publish\Gotowe\Lista obecności\Lista obecności\Pages\Index.razor"
                                                                                                                     x

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(66, "\r\n");
#nullable restore
#line 122 "C:\To Publish\Gotowe\Lista obecności\Lista obecności\Pages\Index.razor"
                                                    goto end;
                                                }
                                                else if (x == holiday)
                                                {
                                                    iRedDays.Add(x);

#line default
#line hidden
#nullable disable
            __builder.AddContent(67, "                                                    ");
            __builder.OpenElement(68, "li");
            __builder.AddAttribute(69, "style", "color:red;");
            __builder.AddContent(70, 
#nullable restore
#line 127 "C:\To Publish\Gotowe\Lista obecności\Lista obecności\Pages\Index.razor"
                                                                            x

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(71, "\r\n");
#nullable restore
#line 128 "C:\To Publish\Gotowe\Lista obecności\Lista obecności\Pages\Index.razor"
                                                    goto end;
                                                }

                                            }
                                        if ((s == 6 || s == 7) && x == DateTime.Today.Day)
                                        {

#line default
#line hidden
#nullable disable
            __builder.AddContent(72, "                                            ");
            __builder.OpenElement(73, "li");
            __builder.AddAttribute(74, "style", "color:red;background:lightgray; border-radius:25px;");
            __builder.AddContent(75, 
#nullable restore
#line 134 "C:\To Publish\Gotowe\Lista obecności\Lista obecności\Pages\Index.razor"
                                                                                                             x

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(76, "\r\n");
#nullable restore
#line 135 "C:\To Publish\Gotowe\Lista obecności\Lista obecności\Pages\Index.razor"
                                        }
                                        else if (s == 6 || s == 7)
                                        {
                                            iRedDays.Add(x);

#line default
#line hidden
#nullable disable
            __builder.AddContent(77, "                                            ");
            __builder.OpenElement(78, "li");
            __builder.AddAttribute(79, "style", "color:red;");
            __builder.AddContent(80, 
#nullable restore
#line 139 "C:\To Publish\Gotowe\Lista obecności\Lista obecności\Pages\Index.razor"
                                                                    x

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(81, "\r\n");
#nullable restore
#line 140 "C:\To Publish\Gotowe\Lista obecności\Lista obecności\Pages\Index.razor"
                                        }
                                        else if (x == DateTime.Today.Day)
                                        {

#line default
#line hidden
#nullable disable
            __builder.AddContent(82, "                                            ");
            __builder.OpenElement(83, "li");
            __builder.AddAttribute(84, "style", "background:lightgray; border-radius:25px;");
            __builder.AddContent(85, 
#nullable restore
#line 143 "C:\To Publish\Gotowe\Lista obecności\Lista obecności\Pages\Index.razor"
                                                                                                   x

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(86, "\r\n");
#nullable restore
#line 144 "C:\To Publish\Gotowe\Lista obecności\Lista obecności\Pages\Index.razor"
                                        }
                                        else
                                        {

#line default
#line hidden
#nullable disable
            __builder.AddContent(87, "                                            ");
            __builder.OpenElement(88, "li");
            __builder.AddAttribute(89, "style", "color:gray;");
            __builder.AddContent(90, 
#nullable restore
#line 147 "C:\To Publish\Gotowe\Lista obecności\Lista obecności\Pages\Index.razor"
                                                                     x

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(91, "\r\n");
#nullable restore
#line 148 "C:\To Publish\Gotowe\Lista obecności\Lista obecności\Pages\Index.razor"
                                        }
                                    end:

                                        x++;
                                    }
                                    else
                                    {

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(92, "                                        <li style=\"color:gray;\"></li>\r\n");
#nullable restore
#line 156 "C:\To Publish\Gotowe\Lista obecności\Lista obecności\Pages\Index.razor"
                                    }
                                    if (s == 7)
                                    {
                                        s = 0;
                                    }
                                }

#line default
#line hidden
#nullable disable
            __builder.AddContent(93, "                        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(94, "\r\n                    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(95, "\r\n\r\n                    ");
            __builder.AddMarkupContent(96, "<div class=\"col-12\"><br></div>\r\n                    ");
            __builder.AddMarkupContent(97, "<div class=\"col-12\"><br></div>\r\n\r\n\r\n                    ");
            __builder.AddMarkupContent(98, @"<div class=""col-12 m-0 p-0"" style=""display:inline-block; position:absolute; right:0; text-align:right;"">
                        <p><label class=""col-12"" style=""font-family: Cambria; color: white; text-shadow: 2px 2px 4px #000000; position:relative;"">Autor: Michał Manios</label></p>
                        <p><label class=""col-12"" style=""letter-spacing: 1px; font-family: Cambria; color: white; text-shadow: 2px 2px 4px #000000; position:relative;"">Wersja: 1.0</label></p>
                    </div>
                ");
            __builder.CloseElement();
            __builder.AddMarkupContent(99, "\r\n\r\n\r\n            ");
            __builder.CloseElement();
            __builder.AddMarkupContent(100, "\r\n        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(101, "\r\n\r\n    ");
            __builder.CloseElement();
        }
        #pragma warning restore 1998
#nullable restore
#line 184 "C:\To Publish\Gotowe\Lista obecności\Lista obecności\Pages\Index.razor"
       
        int iStartDating = 0;
        int iDayInMonth = 0;
        List<int> iRedDays = new List<int>();
        List<int> HolidayDay = new List<int>();
        string Date = "";
        List<FreeDaysDTO> freeDays = new List<FreeDaysDTO>();

        async Task CreateAdminAccount()
        {
            Roles roles = new Roles();
            var user = await _userManager.FindByNameAsync("Admin");
            if (user == null)
            {
                var userAdmin = new IdentityUser { UserName = "Admin", Email = "dil_as@sw.gov.pl" };
                var result = await _userManager.CreateAsync(userAdmin, "Admin123!");

                var RoleResult = await _roleManager.FindByNameAsync(roles.Admin);
                if (RoleResult == null)
                {
                    await _roleManager.CreateAsync(new IdentityRole(roles.Admin));
                }
                await _userManager.AddToRoleAsync(userAdmin, roles.Admin);
            }
        }




    protected override async Task OnInitializedAsync()
    {
        Date = DateTime.Today.Day.ToString() + " " + SetCalendarMonth();
        GetFreeDays();
        SetHolidayDay();
        await CreateAdminAccount();
    }

    int DrawCalendar()
    {
        int Month;
        int Year;
        Month = DateTime.Today.Month;
        Year = DateTime.Today.Year;

        var firstDayOfMonth = new DateTime(Year, Month, 1);
        string sDayOfWeek = firstDayOfMonth.DayOfWeek.ToString();
        int iStartDating = 0;

        if (sDayOfWeek == "Monday") iStartDating = 1;
        if (sDayOfWeek == "Tuesday") iStartDating = 2;
        if (sDayOfWeek == "Wednesday") iStartDating = 3;
        if (sDayOfWeek == "Thursday") iStartDating = 4;
        if (sDayOfWeek == "Friday") iStartDating = 5;
        if (sDayOfWeek == "Saturday") iStartDating = 6;
        if (sDayOfWeek == "Sunday") iStartDating = 7;

        iDayInMonth = DateTime.DaysInMonth(Year, Month);

        return iStartDating;
    }

    string SetCalendarMonth()
    {
        string sMonth = "";

        var month = DateTime.Now.Month.ToString();
        switch (Convert.ToInt32(month))
        {

            case 1: sMonth = "STYCZEŃ"; break;
            case 2: sMonth = "LUTY"; break;
            case 3: sMonth = "MARZEC"; break;
            case 4: sMonth = "KWIECIEŃ"; break;
            case 5: sMonth = "MAJ"; break;
            case 6: sMonth = "CZERWIEC"; break;
            case 7: sMonth = "LIPIEC"; break;
            case 8: sMonth = "SIERPIEŃ"; break;
            case 9: sMonth = "WRZESIEŃ"; break;
            case 10: sMonth = "PAŹDZiERNIK"; break;
            case 11: sMonth = "LISTOPAD"; break;
            case 12: sMonth = "GRUDZIEŃ"; break;
        }
        return sMonth;
    }

    void GetFreeDays()
    {
        var free = iApplicationManager.GetAllFreeDays();
        freeDays = free.OrderBy(x => x.Month).ThenBy(x => x.Day).ToList();
    }

    void SetHolidayDay()
    {
        HolidayDay.Clear();
        var month = DateTime.Today.Month.ToString();
        if (freeDays != null)
            foreach (var freeDay in freeDays)
            {
                if (freeDay.Month.ToString() == month) HolidayDay.Add(freeDay.Day);
            }
    }

#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private RoleManager<IdentityRole> _roleManager { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private UserManager<IdentityUser> _userManager { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private SignInManager<IdentityUser> _signInManager { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IApplicationManager iApplicationManager { get; set; }
    }
}
#pragma warning restore 1591
